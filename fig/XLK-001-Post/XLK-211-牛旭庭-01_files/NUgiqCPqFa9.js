if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }

__d("MPresenceIcon",["DOM","MLegacyDataStore","MRequest","MURI","Stratcom","Visibility","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g=1,h=2,i=6e4,j=null;function k(){var a=b("DOM").scry(document.body,"i","presence-icon"),c=[];for(var d=0,e=a.length;d<e;++d){var f=b("MLegacyDataStore").get(a[d]);f.userid&&!c[f.userid]&&(c[f.userid]=1)}if(c.length==0||b("Visibility").isHidden()){window.clearTimeout(j);j=b("setTimeoutAcrossTransitions")(k,i);return}f=new(b("MURI"))("/chat/presence_icon.php").toString();d=new(b("MRequest"))(f).setData({ids:Object.keys(c)}).setIgnoreErrors(!0);d.listen("done",function(e){for(var c=0,d=a.length;c<d;++c){var f=b("MLegacyDataStore").get(a[c]);f&&f.userid&&b("Stratcom").hasSigil(a[c],"online-icon")&&e[f.userid]==g||b("Stratcom").hasSigil(a[c],"mobile-icon")&&e[f.userid]==h?b("DOM").show(a[c]):b("DOM").hide(a[c])}});d.listen("finally",function(a){window.clearTimeout(j),j=b("setTimeoutAcrossTransitions")(k,i)});d.send()}k()}),null);
__d("MSiteDiodeSourceGroup",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSENGER:"messenger",MLITE:"mlite"});f["default"]=a}),66);
__d("MessengerLiteDiodeTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MessengerLiteDiodeLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MessengerLiteDiodeLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MessengerLiteDiodeLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setMsiteDiodePromotableApp=function(a){this.$1.msite_diode_promotable_app=a;return this};c.setMsiteDiodeStateFromClient=function(a){this.$1.msite_diode_state_from_client=a;return this};c.setSource=function(a){this.$1.source=a;return this};return a}();c={event:!0,msite_diode_promotable_app:!0,msite_diode_state_from_client:!0,source:!0};f["default"]=a}),66);
__d("XMSiteDiodeMessengerLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/log/",{log:{type:"Bool",defaultValue:!1}})}),null);
__d("MessagesJewelNativeAppRedirect",["$","DOM","Event","MHistory","MJewels","MRedirectToNative","MRequest","MSiteMessengerDiodeTypedLogger","MessengerLiteDiodeTypedLogger","Run","Stratcom","URI","XMSiteDiodeMessengerLoggingController","ge","qex"],(function(a,b,c,d,e,f,g){function h(a){function b(b){b.getData().jewel==="messages"&&a()}c("Stratcom").listen("m:jewel:flyout:open",null,b)}function i(a){var b=c("$")("MChromeHeader"),e=d("DOM").find(b,"div","messages");if(!e)return;b=d("DOM").find(e,"*","icon");c("Event").listen(b,"click",function(){var b=c("ge")("peek_state_avatar",e,"div");(b===null||b.style.display==="none")&&a()})}function j(a,b,e,f,g,h,i,j){var k=c("XMSiteDiodeMessengerLoggingController").getURIBuilder().setBool("log",!0).getURI();new(c("MRequest"))(k).send();j=!!(j&&!g);if(e){i==="mlite"?new(c("MessengerLiteDiodeTypedLogger"))().setEvent("fastswitch_attempt").setMsiteDiodeStateFromClient(f).setMsiteDiodePromotableApp(h).log():new(c("MSiteMessengerDiodeTypedLogger"))().setEvent("fast_app_switch_attempt").setMessagingEntryPoint(b).setMsiteDiodeStateFromClient(f).log();c("qex")._("125");c("qex")._("144");k=new(c("URI"))(a);d("MRedirectToNative").redirect(k,{returnToFeed:j,newTab:g});g&&c("MHistory").popSoftState(d("MJewels").MESSAGES)}}a={registerRedirect:function(a,b,c,e,f,g,k,l,m,n){var o=function(){return j(a,b,c,e,f,g,k,l)},p=function(){m?i(o):h(o)};n?d("Run").onAfterLoad(p):p()}};b=a;g["default"]=b}),98);
__d("MessengerRedirectOnClick",["MRedirectToNative","MRequest","MSiteMessengerDiodeTypedLogger","MessengerLiteDiodeTypedLogger","URI","XMSiteDiodeMessengerLoggingController"],(function(a,b,c,d,e,f,g){function h(a,b,c){d("MRedirectToNative").redirect(a,{returnToFeed:b,newTab:c})}a={logClick:function(a,b,d,e,f){a.onclick=function(){new(c("MSiteMessengerDiodeTypedLogger"))().setEvent("redirect_button_click").setMessagingEntryPoint(b).setBadgeCount(d).setUnreadCount(e).setExtra(f).log()}},register:function(a,b,d,e,f,g,i,j){b.onclick=function(){var b=c("XMSiteDiodeMessengerLoggingController").getURIBuilder().setBool("log",!0).getURI();new(c("MRequest"))(b).send();b=!e;if(e&&i==="mlite"){new(c("MessengerLiteDiodeTypedLogger"))().setEvent("fastswitch_attempt").setMsiteDiodeStateFromClient(f).setMsiteDiodePromotableApp(g).log();var k=new(c("URI"))(a);h(k,j,b)}else if(e){new(c("MSiteMessengerDiodeTypedLogger"))().setEvent("fast_app_switch_attempt").setMessagingEntryPoint(d).setMsiteDiodeStateFromClient(f).log();k=new(c("URI"))(a);h(k,j,b)}}},setReturnToFeed:function(a,b){d("MRedirectToNative").setReturnToFeed(a,{returnToFeed:b,newTab:!0})}};b=a;g["default"]=b}),98);
__d("MMessagesThreadRowID",[],(function(a,b,c,d,e,f){"use strict";var g="other_user_fbid_",h="thread_fbid_";function a(a,b,c){return a+(b?g+b:h+String(c))}f.getThreadRowID=a}),66);
__d("fbs",["fbt","invariant","FbtHooks","FbtPureStringResult"],(function(a,b,c,d,e,f,g,h){var i;a=babelHelpers["extends"]({},g,{_param:function(a,c,d){typeof c==="string"||c instanceof b("FbtPureStringResult")||h(0,11709,c,typeof c);return g._param(a,c,d)},_plural:function(a,c,d){d==null||typeof d==="string"||d instanceof b("FbtPureStringResult")||h(0,47119,d,typeof d);return g._plural(a,c,d)},_wrapContent:function(a,c,d){a=typeof a==="string"?[a]:a;var e=(i||(i=b("FbtHooks"))).getErrorListener({hash:d,translation:c});return i.getFbsResult({contents:a,errorListener:e,patternHash:d,patternString:c})}});e.exports=a}),null);
__d("formatNumber",["fbs","intlNumUtils"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("intlNumUtils").formatNumber(a,c)}function g(a,c){return b("fbs")._(/*FBT_CALL*/{"*":"{number}+"}/*FBT_CALL*/,[b("fbs")._param("number",b("intlNumUtils").formatNumberWithThousandDelimiters(a,c),[0,a])])}function h(a,c){return b("fbs")._(/*FBT_CALL*/{"*":"\u003C{number}"}/*FBT_CALL*/,[b("fbs")._param("number",b("intlNumUtils").formatNumberWithThousandDelimiters(a,c),[0,a])])}function c(a,c,d){return a>c?g(c,d):b("intlNumUtils").formatNumberWithThousandDelimiters(a,d)}function d(a,c,d){return a<c?h(c,d):b("intlNumUtils").formatNumberWithThousandDelimiters(a,d)}a.withThousandDelimiters=b("intlNumUtils").formatNumberWithThousandDelimiters;a.withMaxLimit=c;a.withMinLimit=d;e.exports=a}),null);
__d("onAfterDisplay",["NavigationMetrics","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f,g){"use strict";var h=[],i=!1;function a(a){a=c("TimeSlice").guard(a,"onAfterDisplay invocation",{propagationType:c("TimeSlice").PropagationType.ORPHAN});i?c("requestIdleCallback")(a):h.push(a)}c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,function(a,b){["all_pagelets_displayed","e2e"].indexOf(b.event)>-1&&!i&&(i=!0,h.forEach(function(a){c("requestIdleCallback")(a)}))});g["default"]=a}),98);